<!-- templates/post_detail.html -->
{% extends 'base.html' %}

{% block content %}
  <div class="detailed_post">
    <div class="detailed_post-post">
      <div class="detailed_post-post__title">
        <h2>{{ post.title }}</h2>
      </div>
      <div class="detailed_post-post__body">
        {{ post.body|safe }}
      </div>
    </div>
    <div class="detailed_post-comment">
      <div class="detailed_post-comment__title">
        –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ
      </div>
      <div class="detailed_post-comment__comments">
        {% if comments %}
          {% for comment in comments %}
            <div class="detailed_post-comment__comments-element">
              <div class="detailed_post-comment__comments__up">
                <div class="detailed_post-comment__comments__up-author">
                  {{ comment.author }}
                </div>
                <div class="detailed_post-comment__comments__up-date">
                  {{ comment.timestamp }}
                </div>
              </div>
              <div class="detailed_post-comment__comments__down">
                <div class="detailed_post-comment__comments__down-body">
                  {{ comment.body|safe  }}
                </div>
                {% if user == comment.author %}
                  <form class="detailed_post-comment__comments__down-delete" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="id" value="{{ comment.id }}">
                    <input type="submit" class="detailed_post-comment__comments__down-delete_btn" name="comment_del" value="üóëÔ∏è">
                    </input>
                  </form>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        {% else %}
            –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –Ω–µ–º–∞—î
        {% endif %}
      </div>
      {% if user.is_authenticated %}
        <form class="detailed_post-comment__input" method="post">
          {% csrf_token %}
          <textarea maxlength="250" cols="5" rows="10" name="comment"
          class="detailed_post-comment__input-text" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —Ç—É—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä"></textarea>
          <input type="submit" class="detailed_post-comment__input-btn" name="send_comment" value="‚û§"></input>
        </form>
      {% else %}
        –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å, —â–æ–± –ø–∏—Å–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
      {% endif %}
    </div>
  </div>
  <script>
    const container = document.querySelector('.detailed_post-comment__comments');
    container.scrollTop = container.scrollHeight - container.clientHeight;
  </script>
{% endblock content %}

